<div class="task-list-container">
  <div class="header">
    <h2>–ó–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
    <button class="add-btn" (click)="showTaskForm = !showTaskForm">
      + –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞
    </button>
  </div>

  <div class="task-form" *ngIf="showTaskForm">
    <div class="form-group">
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
      <input
        type="text"
        class="form-control"
        [(ngModel)]="newTask.title"
        placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?"
        maxlength="100"
      >
    </div>

    <div class="form-group">
      <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
      <textarea
        class="form-control"
        [(ngModel)]="newTask.description"
        placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏..."
        rows="2"
        maxlength="500"
      ></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
        <select class="form-control" [(ngModel)]="newTask.priority">
          <option value="low">–ù–∏–∑–∫–∏–π</option>
          <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
          <option value="high">–í—ã—Å–æ–∫–∏–π</option>
        </select>
      </div>

      <div class="form-group">
        <label>–°—Ç–∞—Ç—É—Å</label>
        <select class="form-control" [(ngModel)]="newTask.status">
          <option value="pending">–í –æ–∂–∏–¥–∞–Ω–∏–∏</option>
          <option value="in-progress">–í —Ä–∞–±–æ—Ç–µ</option>
          <option value="completed">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
          <option value="queue">–í –æ—á–µ—Ä–µ–¥–∏</option>
          <option value="review">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</option>
        </select>
      </div>

      <div class="form-group">
        <label>–í—Ä–µ–º—è</label>
        <input
          type="time"
          class="form-control"
          [(ngModel)]="newTask.time"
        >
      </div>
    </div>

    <div class="form-actions">
      <button class="add-btn" (click)="addTask()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
      <button class="cancel-btn" (click)="showTaskForm = false">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>

  <div class="tasks-container">
    <div *ngIf="tasks.length === 0" class="empty-state">
      üìÖ
      <p>–ù–∞ —Å–µ–≥–æ–¥–Ω—è –∑–∞–¥–∞—á –Ω–µ—Ç</p>
      <p class="text-sm">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–µ–Ω—å</p>
    </div>

    <div
      *ngFor="let task of tasks"
      class="task-item"
      [class.completed]="task.completed"
      [class]="getStatusClass(task.status)"
    >
      <div class="task-checkbox">
        <input
          type="checkbox"
          [checked]="task.completed"
          (change)="toggleTaskCompletion(task)"
        >
      </div>

      <div class="task-content">
        <div class="task-header">
          <div class="task-title">{{ task.title }}</div>
          <div class="task-status-selector">
            <div class="status-buttons">
              <button
                class="status-btn pending"
                [class.active]="task.status === 'pending'"
                (click)="updateTaskStatus(task, 'pending')"
                title="–í –æ–∂–∏–¥–∞–Ω–∏–∏"
              >
                ‚è≥ –í –æ–∂–∏–¥–∞–Ω–∏–∏
              </button>
              <button
                class="status-btn in-progress"
                [class.active]="task.status === 'in-progress'"
                (click)="updateTaskStatus(task, 'in-progress')"
                title="–í —Ä–∞–±–æ—Ç–µ"
              >
                üîÑ –í —Ä–∞–±–æ—Ç–µ
              </button>
              <button
                class="status-btn completed"
                [class.active]="task.status === 'completed'"
                (click)="updateTaskStatus(task, 'completed')"
                title="–í—ã–ø–æ–ª–Ω–µ–Ω–æ"
              >
                ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ
              </button>
            </div>
          </div>
        </div>

        <div *ngIf="task.description" class="task-description text-sm">
          {{ task.description }}
        </div>

        <div class="task-meta">
          <span class="priority-badge" [class]="getPriorityClass(task.priority)">
            {{ task.priority === 'high' ? '–í—ã—Å–æ–∫–∏–π' : task.priority === 'medium' ? '–°—Ä–µ–¥–Ω–∏–π' : '–ù–∏–∑–∫–∏–π' }}
          </span>

          <span class="status-badge" [class]="getStatusClass(task.status)">
            <span class="status-icon">{{ getStatusIcon(task.status) }}</span>
            {{ getStatusLabel(task.status) }}
          </span>

          <span class="task-time">
            ‚è∞
            {{ task.time }}
          </span>
        </div>
      </div>

      <div class="task-actions">
        <button class="delete-btn" (click)="deleteTask(task.id)" title="–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É">
          üóëÔ∏è
        </button>
      </div>
    </div>
  </div>
</div>
